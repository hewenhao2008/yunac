<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->

<head>
    <meta charset="utf-8" />
    <title>管理平台</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <link rel="stylesheet" href="../assets/global/plugins/iconfont/iconfont.css" type="text/css">
    <link href="../assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/global/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
    <link href="../assets/global/css/plugins.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/layouts/layout/css/layout.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/layouts/layout/css/themes/darkblue.min.css" rel="stylesheet" type="text/css" id="style_color" />
    <link href="../assets/global/plugins/bootstrap-table-master/bootstrap-table.min.css" type="text/css" rel="stylesheet">
    <link href="../assets/global/plugins/bootstrap-select/css/bootstrap-select.min.css" type="text/css" rel="stylesheet">
    <link href="../assets/global/plugins/bootstrap-sweetalert/sweetalert.css" type="text/css" rel="stylesheet">
    <link href="../assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.css" rel="stylesheet" type="text/css" />
</head>
<!-- END HEAD -->

<body class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid page-content-white page-sidebar-fixed">
    <div class="page-wrapper">
        <!-- BEGIN HEADER -->
        <div class="page-header navbar navbar-fixed-top">
            <!-- BEGIN HEADER INNER -->
            <div class="page-header-inner ">
                <!-- BEGIN LOGO -->
                <div class="page-logo">
                    <a href="javascript:;">
                        <img src="../assets/layouts/layout/img/logo.png" alt="logo" class="logo-default" width="87" height="14" /> </a>
                    <div class="menu-toggler sidebar-toggler">
                        <span></span>
                    </div>
                </div>
                <!-- END LOGO -->
                <!-- BEGIN RESPONSIVE MENU TOGGLER -->
                <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse" data-target=".navbar-collapse">
                <span></span>
            </a>
                <!-- END RESPONSIVE MENU TOGGLER -->
                <!-- BEGIN TOP NAVIGATION MENU -->
                <div class="top-menu">
                    <ul class="nav navbar-nav pull-right">
                        <!-- BEGIN USER LOGIN DROPDOWN -->
                        <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->
                        <li class="dropdown dropdown-user">
                            <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                            <span class="username username-hide-on-mobile">  </span>
                        </a>
                        </li>
                        <!-- END USER LOGIN DROPDOWN -->
                        <!-- BEGIN QUICK SIDEBAR TOGGLER -->
                        <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->
                        <li class="dropdown dropdown-quick-sidebar-toggler">
                            <a href="javascript:;" class="dropdown-toggle">
                                <i class="icon-logout"></i>
                            </a>
                        </li>
                        <!-- END QUICK SIDEBAR TOGGLER -->
                    </ul>
                </div>
                <!-- END TOP NAVIGATION MENU -->
            </div>
            <!-- END HEADER INNER -->
        </div>
        <!-- END HEADER -->
        <!-- BEGIN HEADER & CONTENT DIVIDER -->
        <div class="clearfix"></div>
        <!-- END HEADER & CONTENT DIVIDER -->
        <!-- BEGIN CONTAINER -->
        <div class="page-container">
            <!-- BEGIN SIDEBAR -->
            <div class="page-sidebar-wrapper">
                <!-- BEGIN SIDEBAR -->
                <!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing -->
                <!-- DOC: Change data-auto-speed="200" to adjust the sub menu slide up/down speed -->
                <div class="page-sidebar navbar-collapse collapse">
                    <!-- BEGIN SIDEBAR MENU -->
                    <!-- DOC: Apply "page-sidebar-menu-light" class right after "page-sidebar-menu" to enable light sidebar menu style(without borders) -->
                    <!-- DOC: Apply "page-sidebar-menu-hover-submenu" class right after "page-sidebar-menu" to enable hoverable(hover vs accordion) sub menu mode -->
                    <!-- DOC: Apply "page-sidebar-menu-closed" class right after "page-sidebar-menu" to collapse("page-sidebar-closed" class must be applied to the body element) the sidebar sub menu mode -->
                    <!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing -->
                    <!-- DOC: Set data-keep-expand="true" to keep the submenues expanded -->
                    <!-- DOC: Set data-auto-speed="200" to adjust the sub menu slide up/down speed -->
                    <ul class="page-sidebar-menu  page-header-fixed " data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200" style="padding-top: 20px">
                        <!-- DOC: To remove the sidebar toggler from the sidebar you just need to completely remove the below "sidebar-toggler-wrapper" LI element -->
                        <!-- BEGIN SIDEBAR TOGGLER BUTTON -->
                        <!-- END SIDEBAR TOGGLER BUTTON -->
                        <!-- DOC: To remove the search box from the sidebar you just need to completely remove the below "sidebar-search-wrapper" LI element -->
                        <li class="nav-item start active">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i class="iconfont icon-route" style="font-size: 19px;"></i>
                                <span class="title">AP管理</span>
                                <span class="arrow"></span>
                            </a>
                            <ul class="sub-menu">
                                <li class="nav-item start ">
                                    <a href="index.html" class="nav-link ">
                                    <i class="iconfont icon-liebiao" style="font-size: 17px;"></i>
                                    <span class="title">AP列表</span>
                                </a>
                                </li>
                                <li class="nav-item start ">
                                    <a href="peizhi.html" class="nav-link ">
                                    <i class="iconfont icon-xiafapeizhi2" style="font-size: 17px"></i>
                                    <span class="title">配置文件</span>
                                    
                                </a>
                                </li>
                                <li class="nav-item start open">
                                    <a href="version.html" class="nav-link ">
                                    <i class="iconfont icon-icon_shengji" style="font-size: 17px"></i>
                                    <span class="title">固件升级</span>
                                    <span class="selected"></span>
                                </a>
                                </li>
                            </ul>
                        </li>
                        <!--                         <li class="nav-item  ">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i class="icon-diamond"></i>
                                <span class="title">用户管理</span>
                            </a>
                        </li> -->
                        <!--                         <li class="nav-item  ">
                            <a href="javascript:;" class="nav-link nav-toggle">
                            <i class="icon-diamond"></i>
                            <span class="title">基础信息管理</span>
                            <span class="arrow"></span>
                        </a>
                            <ul class="sub-menu">
                                <li class="nav-item start">
                                    <a href="group.html" class="nav-link ">
                                    <i class="icon-bar-chart"></i>
                                    <span class="title">分组管理</span>
                                </a>
                                </li>
                                <li class="nav-item start ">
                                    <a href="javascript:;" class="nav-link ">
                                    <i class="icon-settings"></i>
                                    <span class="title">日志管理</span>
                                </a>
                                </li>
                                <li class="nav-item start ">
                                    <a href="javascript:;" class="nav-link ">
                                    <i class="icon-settings"></i>
                                    <span class="title">代理商管理</span>
                                </a>
                                </li>
                            </ul>
                        </li> -->
                    </ul>
                    <!-- END SIDEBAR MENU -->
                </div>
                <!-- END SIDEBAR -->
            </div>
            <!-- END SIDEBAR -->
            <!-- BEGIN CONTENT -->
            <div class="page-content-wrapper">
                <!-- BEGIN CONTENT BODY -->
                <div class="page-content">
                    <!-- BEGIN PAGE HEADER-->
                    <!-- BEGIN PAGE BAR -->
                    <div class="page-bar">
                        <ul class="page-breadcrumb">
                            <li>
                                <!--<a href="javascript:;">管理首页</a>-->
                                <span>AP管理</span>
                                <i class="fa fa-circle"></i>
                            </li>
                            <li>
                                <span>固件升级</span>
                            </li>
                        </ul>
                    </div>
                    <!-- END PAGE BAR -->
                    <!-- BEGIN PAGE TITLE-->
                    <h1 class="page-title">固件升级
                        <small></small>
                    </h1>
                    <!-- END PAGE TITLE-->
                    <!-- BEGIN DASHBOARD STATS 1-->
                    <div class="clearfix"></div>
                    <!-- END DASHBOARD STATS 1-->
                    <!-- BEGIN TABLE STATIC BASIC-->
                    <!-- END TABLE STATIC BASIC-->
                    <div class="row" id="connectDev">
                        <div class="col-md-12 col-sm-12">
                            <!-- BEGIN EXAMPLE TABLE PORTLET-->
                            <div class="portlet light portlet-fit portlet-datatable bordered">
                                <div class="portlet-title">
                                    <div class="caption">
                                        <i class="iconfont icon-liebiao" style="font-size: 17px;color:rgb(53,152,220);"></i>
                                        <span class="caption-subject font-blue sbold uppercase">固件列表</span>
                                    </div>
                                </div>
                                <div class="portlet-body">
                                    <div class="btn-group" id="toolbar">
                                        <a class="btn btn-circle blue" href="javascript:;" data-toggle="dropdown" aria-expanded="false" id="addSetting">
                                            <i class="fa fa-plus"></i> 上传新固件
                                        </a>
                                    </div>
                                    <table id="mytable"></table>
                                </div>
                            </div>
                            <!-- END EXAMPLE TABLE PORTLET-->
                        </div>
                    </div>
                </div>
                <!-- END CONTENT BODY -->
            </div>
            <!-- END CONTENT -->
            <!-- BEGIN QUICK SIDEBAR -->
            <a href="javascript:;" class="page-quick-sidebar-toggler">
            <i class="icon-login"></i>
        </a>
            <!-- END QUICK SIDEBAR -->
        </div>
        <!-- END CONTAINER -->
    </div>
    <!-- modal-dialog Begin -->
    <div class="modal fade in" id="devName" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">备注</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <input type="text" id="devNameInput" class="col-md-12 form-control" value="init">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn red btn-outline" data-dismiss="modal">取消
                    </button>
                    <button type="button" class="btn green" data-dismiss="modal">保存
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade in" id="delDlg" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">删除固件</h4>
                </div>
                <div class="modal-body">
                    确认要删除此固件吗？
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn red btn-outline" data-dismiss="modal">取消
                    </button>
                    <button type="button" id="saveSetting" class="btn green" data-dismiss="modal" id="setDevParamOk">确认删除
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade in" id="downloadDlg" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">下载固件</h4>
                </div>
                <div class="modal-body">
                    确认要下载此固件吗？
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn red btn-outline" data-dismiss="modal">取消
                    </button>
                    <button type="button" id="saveSetting" class="btn green" data-dismiss="modal" id="setDevParamOk">确认下载
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade in" id="uploadFile" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">上传固件</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <form class="form-horizontal form-row-seperated">
                                <div class="form-body">
                                    <div class="form-group">
                                        <label class="control-label col-md-3">固件版本</label>
                                        <div class="col-md-6">
                                            <input type="text" id="devNameInput" class="form-control" value="">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-3">上传固件</label>
                                        <div class="col-md-6">
                                            <div class="fileinput fileinput-new" data-provides="fileinput">
                                                <div class="input-group input-large">
                                                    <div class="form-control uneditable-input input-fixed input-medium" data-trigger="fileinput">
                                                        <i class="fa fa-file fileinput-exists"></i>&nbsp;
                                                        <span class="fileinput-filename"> </span>
                                                    </div>
                                                    <span class="input-group-addon btn blue btn-file">
                                                                    <span class="fileinput-new"> 选择固件 </span>
                                                    <span class="fileinput-exists"> 重新选择 </span>
                                                    <input type="file" name="..."> </span>
                                                    <a href="javascript:;" class="input-group-addon btn red fileinput-exists" data-dismiss="fileinput"> 删除固件 </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-3">固件备注</label>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control" value="">
                                        </div>
                                    </div>
                            </form>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn red btn-outline" data-dismiss="modal">取消
                        </button>
                        <button type="button" class="btn green" data-dismiss="modal" id="uploadOK">立即上传
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- modal-dialog End -->
        <!--[if lt IE 9]>
<script src="../assets/global/plugins/respond.min.js"></script>
<script src="../assets/global/plugins/excanvas.min.js"></script>
<script src="../assets/global/plugins/ie8.fix.min.js"></script>
<![endif]-->
        <script src="../assets/global/plugins/jquery.min.js" type="text/javascript"></script>
        <script src="../assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="../assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
        <script src="../assets/global/scripts/app.min.js" type="text/javascript"></script>
        <script src="../assets/layouts/layout/scripts/layout.min.js" type="text/javascript"></script>
        <script src="../assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
        <script src="../assets/global/plugins/bootstrap-select/js/bootstrap-select.min.js" type="text/javascript"></script>
        <script src="../assets/global/plugins/bootstrap-sweetalert/sweetalert.min.js" type="text/javascript"></script>
        <script src="../assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.js" type="text/javascript"></script>
        <script src="../assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
        <script src="../assets/global/plugins/bootstrap-table-master/bootstrap-table.min.js"></script>
        <script src="../assets/global/plugins/bootstrap-table-master/locale/bootstrap-table-zh-CN.min.js"></script>
        <script src="../assets/global/plugins/tableExport-jquery-plugin/tableExport.min.js"></script>
        <script src="../assets/global/plugins/tableExport-jquery-plugin/FileSaver.min.js"></script>
        <script src="../assets/global/plugins/tableExport-jquery-plugin/xlsx.core.min.js"></script>
        <script src="../assets/global/plugins/bootstrap-table-master/bootstrap-table-export.js"></script>
        <script type="text/javascript">
        $(document).ready(function() {
            // Cookies.set('mode', 'abc');
            // var abc = Cookies.get('mode');
            // 初始化表格
            $('#mytable').bootstrapTable({
                // search: true, // 显示搜索框
                // sortName: 'mac', // 初始化排序字段
                // url: 'https://weiquaninfo.cn/json/data.json',   
                search: true, // 显示搜索框
                pagination: true, // 底部显示数量,
                pageNumber: 1, //初始化加载第一页，默认第一页
                pageSize: 5, //每页的记录行数
                pageList: [5, 10, 25, 50, 100], //可供选择的每页的行数
                striped: true,
                toolbar: '#toolbar',
                // showExport: true, // 导出（第三方）
                // exportDataType: 'all', // 导出参数
                // exportTypes: ['excel'], // 导出文件类型
                // exportOptions: { // 导出选项
                //     excelFileFormat: 'xlsx'
                // },
                // showColumns: true, // 显示列选择按钮
                // clickToSelect: true,
                columns: [{ // 表头
                    field: 'setName', // 域名
                    title: '固件版本', //文字名称
                    align: 'center', // 水平居中
                    valign: 'middle', // 垂直居中
                    sortable: true, //启用排序
                    visible: true,
                }, {
                    field: 'remarks',
                    title: '备注',
                    align: 'center',
                    valign: 'middle',
                    sortable: true,
                    visible: true,
                    formatter: function(value, row, index) {
                        // 限定12个字符以内
                        var result = "";
                        if (getLength(value) > 12) {
                            result = '<div title=' + value + '>' + '<a class="editName">' + cutstr(value, 12) + '</a></div>';
                        } else {
                            result = '<a class="editName">' + value + '</a>';
                        }
                        return result;
                    },
                    events: 'devNameEvents',
                }, {
                    field: 'regTime',
                    title: '创建时间',
                    align: 'center',
                    valign: 'middle',
                    sortable: true,
                    visible: true,
                    formatter: function(value, row, index) {
                        return '<div title="2017-08-31 16:34:45">' + value + '</div>';
                    },
                }, {
                    field: 'operate',
                    title: '操作',
                    align: 'center',
                    valign: 'middle',
                    sortable: false,
                    formatter: function(value, row, index) {
                        var edit = '<a class="download btn blue btn-circle btn-outline" style="margin-right: 10px" href="javascript:void(0)" >' + '<i class="fa  fa-download"></i>' + '下载' + '</a>';
                        var del = '<a class="delete btn red btn-circle btn-outline" href="javascript:void(0)" >' + '<i class="fa  fa-trash-o"></i>' + '删除' + '</a>';
                        return (edit + del);
                    },
                    events: 'operateEvents'
                }],
            });

            //新增表格数据
            var data = [{
                setName: 'SSID修改',
                remarks: '五号食堂一楼',
                regTime: '2017-08-30',
            }, {
                setName: 'SSID隐藏',
                remarks: '五号食堂一楼',
                regTime: '2017-08-30',
            }, {
                setName: '5.8G配置',
                remarks: '3号写字楼18楼楼道口',
                regTime: '2017-08-30',
            }];
            $('#mytable').bootstrapTable('append', data);
            $("#addSetting").click(function(event) {
                event.preventDefault();
                $("#uploadFile").modal();
            })

            /////////////////////////////////////////////////////////////////////////////////
            // 
            $("#uploadOK").click(function(event) {
                event.preventDefault();
                event.stopPropagation();
                App.blockUI({
                    target: $("#uploadFile"),
                    boxed: true,
                    message: '固件升级指令发送中...',
                    zIndex: 20000,
                });
                window.setTimeout(function() {
                    $("#uploadFile").modal('hide');
                    App.unblockUI('#uploadFile');
                    App.alert({
                        place: 'append', // append or prepent in container 
                        type: 'success', // alert's type
                        message: '固件上传成功', // alert's message
                        close: true, // make alert closable
                        reset: true, // close all previouse alerts first
                        focus: true, // auto scroll to the alert after shown
                        closeInSeconds: '5', // auto close after defined seconds
                    });
                }, 3000);
            })
        })

        ////////////////////////////////////////////////////////////////////////////////////////////////
        // 备注修改
        window.devNameEvents = {
            'click .editName': function(e, value, row, index) {
                e.preventDefault();
                $("#devNameInput").val(value);
                $("#devName").modal();
            }
        }

        ////////////////////////////////////////////////////////////////////////////////////////////////
        // 固件操作
        window.operateEvents = {
            'click .download': function(e, value, row, index) {
                e.preventDefault();
                $("#downloadDlg").modal();
            },
            'click .delete': function(e, value, row, index) {
                // alert("删除第" + (index + 1) + "行");
                var ssids = [];
                ssids.push(row.ssid);
                $("#delDlg").modal();
                $('#tableTab0').bootstrapTable('remove', { field: 'ssid', values: ssids });
            }
        }
        ////////////////////////////////////////////////////////////////////////////////////////////////
        // 
        function getLength(str) {
            return str.replace(/[\u0391-\uFFE5]/g, "aa").length;
        }

        ////////////////////////////////////////////////////////////////////////////////////////////////
        // 
        function cutstr(str, len) {
            var str_length = 0;
            var str_len = 0;
            var str_cut = new String();
            str_len = str.length;
            for (var i = 0; i < str_len; i++) {
                var a = str.charAt(i);
                str_length++;
                if (escape(a).length > 4) {
                    //中文字符的长度经编码之后大于4  
                    str_length++;
                }
                str_cut = str_cut.concat(a);
                if (str_length >= len) {
                    str_cut = str_cut.concat("...");
                    return str_cut;
                }
            }
            //如果给定字符串小于指定长度，则返回源字符串；  
            if (str_length < len) {
                return str;
            }
        }
        </script>
</body>

</html>