<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->

<head>
    <meta charset="utf-8" />
    <title>管理平台</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <link rel="stylesheet" href="../assets/global/plugins/iconfont/iconfont.css" type="text/css">
    <link href="../assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/global/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
    <link href="../assets/global/css/plugins.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/layouts/layout/css/layout.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/layouts/layout/css/themes/darkblue.min.css" rel="stylesheet" type="text/css" id="style_color" />
    <link href="../assets/global/plugins/bootstrap-table-master/bootstrap-table.min.css" type="text/css" rel="stylesheet">
    <link href="../assets/global/plugins/bootstrap-select/css/bootstrap-select.min.css" type="text/css" rel="stylesheet">
    <link href="../assets/global/plugins/bootstrap-sweetalert/sweetalert.css" type="text/css" rel="stylesheet">
    <link href="../assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.css" rel="stylesheet" type="text/css" />
    <link href="../assets/global/plugins/bootstrap-daterangepicker/daterangepicker.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/global/plugins/jstree/dist/themes/default/style.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/global/plugins/bootstrap-sweetalert/sweetalert.css" type="text/css" rel="stylesheet">
</head>
<!-- END HEAD -->

<body class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid page-content-white page-sidebar-fixed">
    <div class="page-wrapper">
        <!-- BEGIN HEADER -->
        <div class="page-header navbar navbar-fixed-top">
            <!-- BEGIN HEADER INNER -->
            <div class="page-header-inner ">
                <!-- BEGIN LOGO -->
                <div class="page-logo">
                    <a href="javascript:;">
                        <img src="../assets/layouts/layout/img/logo.png" alt="logo" class="logo-default" width="87" height="14" /> </a>
                    <div class="menu-toggler sidebar-toggler">
                        <span></span>
                    </div>
                </div>
                <!-- END LOGO -->
                <!-- BEGIN RESPONSIVE MENU TOGGLER -->
                <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse" data-target=".navbar-collapse">
                <span></span>
            </a>
                <!-- END RESPONSIVE MENU TOGGLER -->
                <!-- BEGIN TOP NAVIGATION MENU -->
                <div class="top-menu">
                    <ul class="nav navbar-nav pull-right">
                        <!-- BEGIN USER LOGIN DROPDOWN -->
                        <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->
                        <li class="dropdown dropdown-user">
                            <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                            <span class="username username-hide-on-mobile">  </span>
                        </a>
                        </li>
                        <!-- END USER LOGIN DROPDOWN -->
                        <!-- BEGIN QUICK SIDEBAR TOGGLER -->
                        <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->
                        <li class="dropdown dropdown-quick-sidebar-toggler">
                            <a href="javascript:;" class="dropdown-toggle">
                                <i class="icon-logout"></i>
                            </a>
                        </li>
                        <!-- END QUICK SIDEBAR TOGGLER -->
                    </ul>
                </div>
                <!-- END TOP NAVIGATION MENU -->
            </div>
            <!-- END HEADER INNER -->
        </div>
        <!-- END HEADER -->
        <!-- BEGIN HEADER & CONTENT DIVIDER -->
        <div class="clearfix"></div>
        <!-- END HEADER & CONTENT DIVIDER -->
        <!-- BEGIN CONTAINER -->
        <div class="page-container">
            <!-- BEGIN SIDEBAR -->
            <div class="page-sidebar-wrapper">
                <!-- BEGIN SIDEBAR -->
                <!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing -->
                <!-- DOC: Change data-auto-speed="200" to adjust the sub menu slide up/down speed -->
                <div class="page-sidebar navbar-collapse collapse">
                    <!-- BEGIN SIDEBAR MENU -->
                    <!-- DOC: Apply "page-sidebar-menu-light" class right after "page-sidebar-menu" to enable light sidebar menu style(without borders) -->
                    <!-- DOC: Apply "page-sidebar-menu-hover-submenu" class right after "page-sidebar-menu" to enable hoverable(hover vs accordion) sub menu mode -->
                    <!-- DOC: Apply "page-sidebar-menu-closed" class right after "page-sidebar-menu" to collapse("page-sidebar-closed" class must be applied to the body element) the sidebar sub menu mode -->
                    <!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing -->
                    <!-- DOC: Set data-keep-expand="true" to keep the submenues expanded -->
                    <!-- DOC: Set data-auto-speed="200" to adjust the sub menu slide up/down speed -->
                    <ul class="page-sidebar-menu  page-header-fixed " data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200" style="padding-top: 20px">
                        <!-- DOC: To remove the sidebar toggler from the sidebar you just need to completely remove the below "sidebar-toggler-wrapper" LI element -->
                        <!-- BEGIN SIDEBAR TOGGLER BUTTON -->
                        <!-- END SIDEBAR TOGGLER BUTTON -->
                        <!-- DOC: To remove the search box from the sidebar you just need to completely remove the below "sidebar-search-wrapper" LI element -->
                        <li class="nav-item start ">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i class="iconfont icon-shebei" style="font-size: 20px;"></i>
                                <span class="title">设备管理</span>
                                <span class="arrow"></span>
                            </a>
                            <ul class="sub-menu">
                                <li class="nav-item start ">
                                    <a href="index.html" class="nav-link ">
                                    <i class="iconfont icon-route" style="font-size: 20px;"></i>
                                    <span class="title">AP管理</span>
                                </a>
                                </li>
                                <li class="nav-item">
                                    <a href="tanzhen.html" class="nav-link ">
                                    <i class="iconfont icon-tanzhen" style="font-size: 20px;"></i>
                                    <span class="title">探针管理</span>
                                </a>
                                </li>
                                <li class="nav-item">
                                    <a href="authServer.html" class="nav-link ">
                                    <i class="iconfont icon-fuwuqi" style="font-size: 20px;"></i>
                                    <span class="title">认证服务器管理</span>
                                </a>
                                </li>
                                <li class="nav-item">
                                    <a href="group.html" class="nav-link ">
                                    <i class="iconfont icon-fenzu" style="font-size: 20px;"></i>
                                    <span class="title">分组管理</span>
                                </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i class="iconfont icon-yonghuguanli2" style="font-size: 20px"></i>
                                <span class="title">用户管理</span>
                                <span class="arrow"></span>
                            </a>
                            <ul class="sub-menu">
                                <li class="nav-item">
                                    <a href="apUser.html" class="nav-link ">
                                    <i class="iconfont icon-yonghuguanli1" style="font-size: 20px;"></i>
                                    <span class="title">AP用户</span>
                                </a>
                                </li>
                                <li class="nav-item">
                                    <a href="tanzhenUser.html" class="nav-link ">
                                    <i class="iconfont icon-yonghuguanli" style="font-size: 20px;"></i>
                                    <span class="title">探针用户</span>
                                </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item active">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i class="iconfont icon-xitong" style="font-size: 20px"></i>
                                <span class="title">系统管理</span>
                                <span class="arrow"></span>
                            </a>
                            <ul class="sub-menu ">
                                <li class="nav-item">
                                    <a href="version.html" class="nav-link ">
                                    <i class="iconfont icon-icon_shengji" style="font-size: 20px;"></i>
                                    <span class="title">固件管理</span>
                                </a>
                                </li>
                                <li class="nav-item">
                                    <a href="log.html" class="nav-link ">
                                    <i class="iconfont icon-icon1" style="font-size: 20px;"></i>
                                    <span class="title">日志管理</span>
                                </a>
                                </li>
                                <li class="nav-item">
                                    <a href="client.html" class="nav-link ">
                                    <i class="iconfont icon-dailishang" style="font-size: 20px;"></i>
                                    <span class="title">客户管理</span>
                                </a>
                                </li>
                                <li class="nav-item open">
                                    <a href="menu.html" class="nav-link ">
                                    <i class="iconfont icon-caidan" style="font-size: 20px;"></i>
                                    <span class="title">菜单管理</span>
                                    <span class="selected"></span>
                                </a>
                                </li>
                            </ul>
                        </li>
                        <!--                         <li class="nav-item  ">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i class="icon-diamond"></i>
                                <span class="title">用户管理</span>
                            </a>
                        </li> -->
                        <!--                         <li class="nav-item  ">
                            <a href="javascript:;" class="nav-link nav-toggle">
                            <i class="icon-diamond"></i>
                            <span class="title">基础信息管理</span>
                            <span class="arrow"></span>
                        </a>
                            <ul class="sub-menu">
                                <li class="nav-item start">
                                    <a href="group.html" class="nav-link ">
                                    <i class="icon-bar-chart"></i>
                                    <span class="title">分组管理</span>
                                </a>
                                </li>
                                <li class="nav-item start ">
                                    <a href="javascript:;" class="nav-link ">
                                    <i class="icon-settings"></i>
                                    <span class="title">日志管理</span>
                                </a>
                                </li>
                                <li class="nav-item start ">
                                    <a href="javascript:;" class="nav-link ">
                                    <i class="icon-settings"></i>
                                    <span class="title">代理商管理</span>
                                </a>
                                </li>
                            </ul>
                        </li> -->
                    </ul>
                    <!-- END SIDEBAR MENU -->
                </div>
                <!-- END SIDEBAR -->
            </div>
            <!-- END SIDEBAR -->
            <!-- BEGIN CONTENT -->
            <div class="page-content-wrapper">
                <!-- BEGIN CONTENT BODY -->
                <div class="page-content">
                    <!-- BEGIN PAGE HEADER-->
                    <!-- BEGIN PAGE BAR -->
                    <div class="page-bar">
                        <ul class="page-breadcrumb">
                            <li>
                                <!--<a href="javascript:;">管理首页</a>-->
                                <span>菜单管理</span>
                                <i class="fa fa-circle"></i>
                            </li>
                            <li>
                                <span></span>
                            </li>
                        </ul>
                    </div>
                    <!-- END PAGE BAR -->
                    <!-- BEGIN PAGE TITLE-->
                    <h1 class="page-title">菜单管理
                        <small></small>
                    </h1>
                    <!-- END PAGE TITLE-->
                    <!-- BEGIN DASHBOARD STATS 1-->
                    <div class="clearfix"></div>
                    <!-- END DASHBOARD STATS 1-->
                    <!-- BEGIN TABLE STATIC BASIC-->
                    <!-- END TABLE STATIC BASIC-->
                    <div class="row" id="connectDev">
                        <div class="col-md-12 col-sm-12">
                            <!-- BEGIN EXAMPLE TABLE PORTLET-->
                            <div class="portlet light portlet-fit portlet-datatable bordered">
                                <div class="portlet-title">
                                    <div class="caption">
                                        <i class="iconfont icon-liebiao" style="font-size: 17px;color:rgb(53,152,220);"></i>
                                        <span class="caption-subject font-blue sbold uppercase">菜单管理</span>
                                    </div>
                                </div>
                                <div class="portlet-body form">
                                    <form class="form-horizontal">
                                        <div class="form-body">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label class="control-label col-md-3">菜单</label>
                                                        <div class="col-md-3">
                                                            <div id="powerTree"> </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label class="control-label col-md-3">菜单名称：</label>
                                                        <p class="form-control-static" id="selMenuName"> 未选中菜单 </p>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label col-md-3">菜单链接：</label>
                                                        <p class="form-control-static" id="selMenuAddress"> http:// </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-actions">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="row">
                                                        <div class="col-md-offset-3 col-md-9">
                                                            <button type="submit" class="btn green" id="saveTree">
                                                                <i class="fa fa-check"></i> 保存
                                                            </button>
                                                            <!-- <button type="button" class="btn red">
    <i class="fa fa-warning"></i> 复位
</button> -->
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <!-- END EXAMPLE TABLE PORTLET-->
                        </div>
                    </div>
                </div>
                <!-- END CONTENT BODY -->
            </div>
            <!-- END CONTENT -->
            <!-- BEGIN QUICK SIDEBAR -->
            <a href="javascript:;" class="page-quick-sidebar-toggler">
            <i class="icon-login"></i>
        </a>
            <!-- END QUICK SIDEBAR -->
        </div>
        <!-- END CONTAINER -->
    </div>
    <!-- modal-dialog Begin -->
    <div class="modal fade in" id="editMenuDlg" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">编辑菜单链接</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <form class="form-horizontal form-row-seperated">
                                <div class="form-body">
                                    <div class="form-group">
                                        <div class="row">
                                            <label class="control-label col-md-3">菜单id：</label>
                                            <div class="col-md-6">
                                                <p class="form-control-static" id="editMenuId"> id </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="row">
                                            <label class="control-label col-md-3">菜单名称：</label>
                                            <div class="col-md-6">
                                                <p class="form-control-static" id="editMenuName"> init </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="row">
                                            <label class="control-label col-md-3">菜单链接</label>
                                            <div class="col-md-6">
                                                <input type="text" id="menuAddress" class="form-control" value="http://">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn red btn-outline" data-dismiss="modal">取消
                    </button>
                    <button type="button" class="btn green" data-dismiss="modal" id="saveMenuAddress">保存
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade in" id="saveTreeDlg" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">保存菜单</h4>
                </div>
                <div class="modal-body">
                    将会保存当前配置的菜单，确认保存吗？
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn red btn-outline" data-dismiss="modal">取消
                    </button>
                    <button type="button" class="btn green" data-dismiss="modal" id="saveCurTreeBtn">立即保存
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal-dialog End -->
    <!--[if lt IE 9]>
<script src="../assets/global/plugins/respond.min.js"></script>
<script src="../assets/global/plugins/excanvas.min.js"></script>
<script src="../assets/global/plugins/ie8.fix.min.js"></script>
<![endif]-->
    <script src="../assets/global/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/moment.min.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/bootstrap-daterangepicker/daterangepicker.min.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
    <script src="../assets/global/scripts/app.min.js" type="text/javascript"></script>
    <script src="../assets/layouts/layout/scripts/layout.min.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/bootstrap-select/js/bootstrap-select.min.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/bootstrap-sweetalert/sweetalert.min.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/bootstrap-table-master/bootstrap-table.min.js"></script>
    <script src="../assets/global/plugins/bootstrap-table-master/locale/bootstrap-table-zh-CN.min.js"></script>
    <script src="../assets/global/plugins/tableExport-jquery-plugin/tableExport.min.js"></script>
    <script src="../assets/global/plugins/tableExport-jquery-plugin/FileSaver.min.js"></script>
    <script src="../assets/global/plugins/tableExport-jquery-plugin/xlsx.core.min.js"></script>
    <script src="../assets/global/plugins/bootstrap-table-master/bootstrap-table-export.js"></script>
    <script src="../assets/global/plugins/jstree/dist/jstree.min.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/bootstrap-sweetalert/sweetalert.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        ///////////////////////////////////////////////////////////////////////////////////////////
        // 权限树
        $('#powerTree').jstree({
            'plugins': ["types", "contextmenu"],
            "types": {
                "folder": {
                    "icon": "fa fa-folder icon-state-info icon-lg"
                },
                "file": {
                    "icon": "fa fa-file icon-state-warning icon-lg"
                },
                "root": {
                    "icon": "fa fa-tree icon-state-success icon-lg"
                }
            },
            "contextmenu": {
                "items": {
                    "create": {
                        "label": "新增菜单",
                        "icon": "fa fa-plus font-blue",
                        "action": function(data) {
                            var ref = $('#powerTree').jstree(true);
                            var obj = ref.get_node(data.reference); //获得当前节点所有属性
                            var type = ref.get_type(obj);
                            var nodeData = { "type": "file", "state": { "opened": true } };
                            if (type == "root") {
                                nodeData.type = "folder";
                            } else if (type == "file") {
                                swal({
                                    title: "创建菜单失败",
                                    text: "已经是二级菜单，无法继续创建！",
                                    type: "error",
                                    showConfirmButton: true,
                                    confirmButtonClass: "btn-danger",
                                    confirmButtonText: "确认",
                                    showCancelButton: false,
                                    closeOnConfirm: true
                                })
                                return false;
                            }
                            // $("#addMenuDlg").modal();
                            var node = ref.create_node(obj, nodeData);
                            if (node) {
                                ref.edit(node);
                            }
                        }
                    },
                    "rename": {
                        "label": "修改菜单名称",
                        "icon": "fa fa-pencil font-blue",
                        "action": function(data) {
                            var ref = $('#powerTree').jstree(true);
                            var obj = ref.get_node(data.reference);
                            var type = ref.get_type(obj);
                            if (type == "root") {
                                // 不能修改根目录
                                swal({
                                    title: "修改菜单名称失败",
                                    text: "不可修改根目录名称！",
                                    type: "error",
                                    showConfirmButton: true,
                                    confirmButtonClass: "btn-danger",
                                    confirmButtonText: "确认",
                                    showCancelButton: false,
                                    closeOnConfirm: true
                                })
                                return false;
                            };
                            if (obj) {
                                ref.edit(obj);
                            }
                        }
                    },
                    "ccp": {
                        "label": "编辑菜单链接",
                        "icon": "fa fa-pencil font-blue",
                        "action": function(data) {
                            var ref = $('#powerTree').jstree(true);
                            var obj = ref.get_node(data.reference);
                            var type = ref.get_type(obj);
                            if (type == "root") {
                                // 不能修改根目录
                                swal({
                                    title: "修改菜单链接失败",
                                    text: "不可修改根目录链接！",
                                    type: "error",
                                    showConfirmButton: true,
                                    confirmButtonClass: "btn-danger",
                                    confirmButtonText: "确认",
                                    showCancelButton: false,
                                    closeOnConfirm: true
                                })
                                return false;
                            };
                            $("#editMenuName").text(ref.get_text(obj));
                            $("#editMenuId").text(obj.id);
                            $("#menuAddress").val(Cookies.get(obj.id));
                            $("#editMenuDlg").modal();
                        }
                    },
                    "remove": {
                        "label": "删除菜单",
                        "icon": "fa fa-remove font-red",
                        "action": function(data) {
                            var ref = $('#powerTree').jstree(true);
                            var obj = ref.get_node(data.reference);
                            var type = ref.get_type(obj);
                            if (type == "root") {
                                // 删除根目录
                                swal({
                                    title: "删除菜单失败",
                                    text: "不可删除根目录！",
                                    type: "error",
                                    showConfirmButton: true,
                                    confirmButtonClass: "btn-danger",
                                    confirmButtonText: "确认",
                                    showCancelButton: false,
                                    closeOnConfirm: true
                                })
                                return false;
                            } else if (type == "folder") {
                                // 删除一级菜单，如果没有二级菜单则可删，否则不可删
                                var childs = ref.get_children_dom(obj);
                                if (!childs.length) {
                                    ref.delete_node(obj);
                                    return true;
                                } else {
                                    swal({
                                        title: "删除菜单失败",
                                        text: "请先删除菜单下的子菜单！",
                                        type: "error",
                                        showConfirmButton: true,
                                        confirmButtonClass: "btn-danger",
                                        confirmButtonText: "确认",
                                        showCancelButton: false,
                                        closeOnConfirm: true
                                    })
                                    return false;
                                }
                            } else {
                                // 删除二级菜单
                                ref.delete_node(obj);
                            }
                        }
                    },

                }
            },
            'core': {
                "check_callback": true,
                "themes": {
                    "responsive": false
                },
                'data': [{
                    "text": "root",
                    "state": {
                        "opened": true,
                    },
                    "type": "root",
                    "id": "root0",
                }]
            },
        });

        //////////////////////////////////////////////////////////////////////////////////////////
        // 选中树结点
        $('#powerTree').on("activate_node.jstree", function(e, data) {
            var ref = $('#powerTree').jstree(true);
            $("#selMenuName").text(ref.get_text(data.node));
            var value = Cookies.get(data.node.id);
            if (typeof(value) == "undefined") {
                $("#selMenuAddress").text("");
            } else {
                $("#selMenuAddress").text(value);
            }
        });
        //////////////////////////////////////////////////////////////////////////////////////////
        // 保存树链接（key为id）
        $('#saveMenuAddress').click(function(e) {
            e.preventDefault();
            e.stopPropagation();
            var key = $("#editMenuId").text();
            var value = $("#menuAddress").val();
            Cookies.set(key, value);
            $("#selMenuAddress").text(value);
            $('#editMenuDlg').modal('hide');

        })
        //////////////////////////////////////////////////////////////////////////////////////////
        // 保存当前设置的菜单
        $('#saveTree').click(function(e) {
            e.preventDefault();
            e.stopPropagation();
            $("#saveTreeDlg").modal();
        })
        $('#saveCurTreeBtn').click(function(e) {
            e.preventDefault();
            e.stopPropagation();
            var treeData = $('#powerTree').jstree(true).get_json();
            alert(JSON.stringify(treeData));
            $("#saveTreeDlg").modal('hide');
        })
    })
    </script>
</body>

</html>